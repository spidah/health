<div class="block">
  <h2>Foods</h2>
  <%= print_flash(flash[:info], 'info') -%>
  <% if @foods.size > 0 -%>
  <p>You have <%= pluralize(@foods.size, 'food') -%>. Would you like to <a href="#" onclick="changeVisibility('foods_form', 'block'); return false;">add another</a>?</p>
  <div id="foods_form" style="display:none">
    <% form_for(@food) do |f| -%>
    <%= render :partial => 'food_form', :locals => {:f => f, :action => 'Add', :no_cancel  => true} -%>
    <% end -%>
  </div>
  <% content_for :extrajavascript do -%>
  function changeVisibility(element, visibility) {
    document.getElementById(element).style.display = visibility;
  }
  <% end -%>
</div>
<div class="block">
  <table class="foods-list">
    <tr>
      <%= render :partial => 'foods_header' -%>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  <% for food in @foods do -%>
    <tr class="<%= cycle('odd', 'even') -%>">
      <%= render :partial => 'food_item', :locals => {:food => food} -%>
      <td class="edit"><%= link_to image_tag('/images/edit.gif'), edit_food_path(food) -%></td>
      <td class="delete"><%= link_to image_tag('/images/delete.gif'), food_path(food),
        :confirm => 'Are you sure you want to delete this food?', :method => :delete -%></td>
    </tr>
  <% end -%>
  </table>
  <%= will_paginate(@foods) -%>
  <% else -%>
  <p>You have not entered any foods yet. You can only add items to a meal after you have added a food for it.</p>
  <div id="foods_form">
    <% form_for(@food) do |f| -%>
      <%= render :partial => 'food_form', :locals => {:f => f, :action => 'Add'} -%>
    <% end -%>
  </div>
  <% end -%>
</div>
